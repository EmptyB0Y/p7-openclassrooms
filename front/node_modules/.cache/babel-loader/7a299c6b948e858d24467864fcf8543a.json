{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LILKETRU\\\\Desktop\\\\openclassrooms\\\\P7\\\\Groupomania\\\\front\\\\src\\\\components\\\\Comments.js\",\n    _s = $RefreshSig$();\n\nimport like from '../assets/Icons/like.png';\nimport nopic from '../assets/Icons/nopic.webp';\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { GetComments, PostComment, GetAuthorProfile } from '../services/comments.service';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Comments = id => {\n  _s();\n\n  const [comments, setComments] = useState([]);\n  const [change, setChange] = useState(false);\n  const [profiles, setProfiles] = useState([]);\n  let authorProfiles = [];\n  useEffect(() => {\n    GetComments(id).then(data => {\n      console.log(data);\n      setComments(data);\n\n      for (let i = 0; i < comments.length; i++) {\n        GetAuthorProfile(i.author).then(profile => {\n          let tab = [];\n\n          for (let j = 0; j < profiles.length; j++) {\n            tab.push(profiles[i]);\n          }\n\n          tab.push(profile);\n          setProfiles(tab);\n        });\n      }\n\n      setProfiles(authorProfiles);\n      console.log(profiles);\n    }).catch(err => console.log(err));\n  }, []);\n\n  const getProfile = author => {\n    /*GetAuthorProfile(author).then((profile)=>{\r\n        profiles.push(profile);\r\n        return profile.firstname;\r\n    }).catch(()=>{return 'Loading'});*/\n  };\n\n  let commentsElement = /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: comments.map(comment => /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"comment\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"comment-profile-picture\",\n        src: nopic\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            id: \"comment-author\",\n            children: comment.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 24\n          }, this), \"~\", comment.text]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this)]\n    }, comment._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n\n  if (change) {\n    setChange(false);\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: comments.map(comment => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"comment\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"comment-profile-picture\",\n          src: nopic\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [comment.author, \"~\", comment.text]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this)]\n      }, comment._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this);\n  }\n\n  if (comments.length === 0) {\n    commentsElement = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No comments yet...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 28\n    }, this);\n  }\n\n  const refresh = () => {\n    setChange(true);\n    GetComments(id).then(data => {\n      setComments(data);\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let text = e.target['input'].value;\n    PostComment(id.id, text).then(() => {\n      refresh();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"commments-frame\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comments-frame-content\",\n      children: commentsElement\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-comment\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => {\n          handleSubmit(e);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"input\",\n          className: \"add-comment-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-comment-button\",\n          children: \"post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Comments, \"pakKFOnjH03YG6/RYDmtfcKLsIM=\");\n\n_c = Comments;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comments\");","map":{"version":3,"sources":["C:/Users/LILKETRU/Desktop/openclassrooms/P7/Groupomania/front/src/components/Comments.js"],"names":["like","nopic","useState","useEffect","useRef","useCallback","GetComments","PostComment","GetAuthorProfile","Comments","id","comments","setComments","change","setChange","profiles","setProfiles","authorProfiles","then","data","console","log","i","length","author","profile","tab","j","push","catch","err","getProfile","commentsElement","map","comment","text","_id","refresh","handleSubmit","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import like from '../assets/Icons/like.png'\r\nimport nopic from '../assets/Icons/nopic.webp'\r\nimport { useState, useEffect, useRef, useCallback } from 'react'\r\nimport {GetComments,PostComment,GetAuthorProfile} from '../services/comments.service'\r\n\r\nexport const Comments = (id) => {\r\n    const [comments, setComments] = useState([]);\r\n    const [change, setChange] = useState(false);\r\n    const [profiles, setProfiles] = useState([]);\r\n\r\n    let authorProfiles = [];\r\n\r\n    useEffect(() => {\r\n        GetComments(id)\r\n        .then(data => {\r\n            console.log(data);\r\n            setComments(data);\r\n            for(let i = 0; i< comments.length; i++){\r\n                GetAuthorProfile(i.author)\r\n                .then((profile)=>{\r\n                    let tab = [];\r\n                    for(let j = 0; j < profiles.length; j++){\r\n                        tab.push(profiles[i]);\r\n                    }\r\n                    tab.push(profile);\r\n                    setProfiles(tab);               \r\n                })\r\n            }\r\n            setProfiles(authorProfiles);\r\n            console.log(profiles);\r\n        })\r\n        .catch((err) => console.log(err)) \r\n      }, [])\r\n\r\n    const getProfile = (author) =>{\r\n        /*GetAuthorProfile(author).then((profile)=>{\r\n            profiles.push(profile);\r\n            return profile.firstname;\r\n        }).catch(()=>{return 'Loading'});*/\r\n    }\r\n\r\n    let commentsElement = (\r\n        <ul>\r\n        {comments.map((comment) =>\r\n            <li className='comment' key={comment._id}>\r\n                <img className='comment-profile-picture' src={nopic}></img>\r\n                <div>\r\n                    <p><a href='#' id='comment-author'>{comment.author}</a>~\r\n                    {comment.text}\r\n                    </p>\r\n                </div>\r\n            </li>)}\r\n        </ul>\r\n        );\r\n\r\n    if(change){\r\n        setChange(false);\r\n\r\n        return (\r\n        <ul>\r\n        {comments.map((comment) =>\r\n            <li className='comment' key={comment._id}>\r\n                <img className='comment-profile-picture' src={nopic}></img>\r\n                <div>\r\n                    <p>{comment.author}~\r\n                    {comment.text}\r\n                    </p>\r\n                </div>\r\n            </li>)}\r\n        </ul>\r\n        );\r\n    }\r\n\r\n    if(comments.length === 0){\r\n        commentsElement = (<p>No comments yet...</p>);\r\n    }\r\n    const refresh = () => {\r\n        setChange(true);\r\n        GetComments(id).then((data) =>{\r\n            setComments(data);\r\n        });\r\n      }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        let text = e.target['input'].value; \r\n        PostComment(id.id,text)\r\n        .then(() => { refresh()});\r\n    }\r\n\r\n    return (\r\n    <div className='commments-frame'>\r\n        <div className='comments-frame-content'>\r\n            {commentsElement}\r\n        </div>\r\n        <div className='add-comment'>\r\n            <form onSubmit={(e) => {handleSubmit(e)}}>\r\n                <input name='input' className='add-comment-input'></input>\r\n                <button className='add-comment-button'>post</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}