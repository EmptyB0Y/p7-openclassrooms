{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = \"http://127.0.0.1:3000/api/\";\nexport const GetPosts = topic => {\n  const options = {\n    headers: {\n      Authorization: 'Bearer ' + sessionStorage.getItem(\"token\")\n    }\n  };\n  return axios.get(BASE_URL + 'posts/topic/' + topic, options).then(res => {\n    return res.data;\n  }).catch(err => err);\n};\n_c = GetPosts;\nexport const GetTopics = () => {\n  const options = {\n    headers: {\n      Authorization: 'Bearer ' + sessionStorage.getItem(\"token\")\n    }\n  };\n  return axios.get(BASE_URL + 'posts/topics', options).then(res => {\n    return res.data;\n  }).catch(err => err);\n};\n_c2 = GetTopics;\nexport const PostPost = function (text, topic) {\n  let data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const options = {\n    headers: {\n      Authorization: 'Bearer ' + sessionStorage.getItem(\"token\")\n    }\n  };\n  const bodyParameters = {\n    userId: sessionStorage.getItem(\"userId\"),\n    post: {\n      content: text,\n      topic: topic\n    }\n  };\n  let fm = new FormData();\n  fm.append('userId', sessionStorage.getItem(\"userId\"));\n  fm.append('post', {\n    content: text,\n    topic: topic\n  });\n\n  if (data !== null) {\n    fm.append('image', data);\n  }\n\n  return axios.post(BASE_URL + 'posts', fm, {\n    headers: {\n      Authorization: 'Bearer ' + sessionStorage.getItem(\"token\")\n    }\n  }).then(res => console.log(res.data)).catch(err => err);\n};\n_c3 = PostPost;\nexport const DelPost = postId => {\n  console.log(\"post id : \" + postId);\n  return axios.delete(BASE_URL + 'posts/' + postId + \"\", {\n    headers: {\n      Authorization: 'Bearer ' + sessionStorage.getItem(\"token\")\n    },\n    data: {\n      userId: sessionStorage.getItem(\"userId\")\n    }\n  }).then(res => console.log(res.data)).catch(err => err);\n};\n_c4 = DelPost;\nexport const LikePost = (postId, like) => {\n  const options = {\n    headers: {\n      Authorization: 'Bearer ' + sessionStorage.getItem(\"token\")\n    }\n  };\n  const bodyParameters = {\n    userId: sessionStorage.getItem(\"userId\"),\n    like: like\n  };\n  return axios.post(BASE_URL + 'posts/' + postId + \"/like\", bodyParameters, options).then(res => console.log(res.data)).catch(err => err);\n};\n_c5 = LikePost;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"GetPosts\");\n$RefreshReg$(_c2, \"GetTopics\");\n$RefreshReg$(_c3, \"PostPost\");\n$RefreshReg$(_c4, \"DelPost\");\n$RefreshReg$(_c5, \"LikePost\");","map":{"version":3,"sources":["C:/Users/LILKETRU/Desktop/openclassrooms/P7/Groupomania/front/src/services/posts.service.js"],"names":["axios","BASE_URL","GetPosts","topic","options","headers","Authorization","sessionStorage","getItem","get","then","res","data","catch","err","GetTopics","PostPost","text","bodyParameters","userId","post","content","fm","FormData","append","console","log","DelPost","postId","delete","LikePost","like"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n\r\nconst BASE_URL = \"http://127.0.0.1:3000/api/\"\r\n\r\nexport const GetPosts = (topic) => {\r\n  const options = {\r\n      headers: { Authorization: 'Bearer '+sessionStorage.getItem(\"token\") }\r\n  };\r\n  \r\n  return axios.get(BASE_URL + 'posts/topic/'+topic,options)\r\n      .then((res) => {return res.data;})\r\n      .catch((err) => err)\r\n}\r\n\r\nexport const GetTopics = () => {\r\n  \r\n  const options = {\r\n    headers: { Authorization: 'Bearer '+sessionStorage.getItem(\"token\") }\r\n};\r\n\r\nreturn axios.get(BASE_URL + 'posts/topics',options)\r\n    .then((res) => {return res.data;})\r\n    .catch((err) => err)\r\n}\r\n\r\nexport const PostPost = (text,topic,data=null) => {\r\n\r\n  const options = {\r\n    headers:{\r\n    Authorization: 'Bearer '+sessionStorage.getItem(\"token\")\r\n    }\r\n  };\r\n  const bodyParameters = {\r\n      userId : sessionStorage.getItem(\"userId\"),\r\n      post: {content: text,topic: topic}\r\n  };\r\n\r\n  let fm = new FormData();\r\n  fm.append('userId', sessionStorage.getItem(\"userId\"));\r\n  fm.append('post', {content: text,topic: topic});\r\n\r\n  if(data !== null){\r\n    fm.append('image', data);\r\n  }\r\n  return axios.post(BASE_URL + 'posts',fm,{\r\n    headers: {\r\n     Authorization: 'Bearer '+sessionStorage.getItem(\"token\") }\r\n  })\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => err)\r\n}\r\n\r\nexport const DelPost = (postId) =>{\r\n\r\n  console.log(\"post id : \"+postId);\r\n  return axios.delete(BASE_URL + 'posts/'+postId+\"\",{\r\n      headers: { Authorization: 'Bearer '+sessionStorage.getItem(\"token\") },\r\n      data:{\r\n          userId : sessionStorage.getItem(\"userId\")\r\n      }\r\n  })\r\n  .then((res) => console.log(res.data))\r\n  .catch((err) => err)\r\n}\r\n\r\nexport const LikePost = (postId,like) => {\r\n\r\n  const options = {\r\n    headers:{\r\n    Authorization: 'Bearer '+sessionStorage.getItem(\"token\")\r\n  }\r\n};\r\nconst bodyParameters = {\r\n    userId : sessionStorage.getItem(\"userId\"),\r\n    like: like\r\n};\r\n  \r\n  return axios.post(BASE_URL + 'posts/'+postId+\"/like\",bodyParameters,options)\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => err)\r\n}"]},"metadata":{},"sourceType":"module"}